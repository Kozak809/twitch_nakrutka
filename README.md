# Twitch Selenium Chat Bot

Запускает несколько экземпляров Chrome (по одному на каждый профиль пользователя), авторизуется с куками и **бесконечно** отправляет рандомные сообщения из `hi.txt` в чат указанного канала с интервалом 20-120 секунд.

## Структура файлов
- `bot.py` — основной скрипт
- `requirements.txt` — зависимости Python
- `hi.txt` — приветственные сообщения (первое сообщение бота)
- `phrases.txt` — обычные фразы для взаимодействия с чатом
- `users/` — папка с профилями пользователей (куки)
  - `user1.txt` — куки первого аккаунта
  - `user2.txt` — куки второго аккаунта
  - и т.д.

## Установка
Рекомендуется виртуальное окружение.

```powershell
# Windows PowerShell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
```

Если используется `py`:
```powershell
py -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
```

ChromeDriver будет автоматически установлен через `webdriver-manager`.

## Настройка профилей пользователей

### Формат файлов куков
Каждый файл в папке `users/` должен называться `userN.txt` (где N — номер) и содержать куки в формате:
```
cookie_name cookie_value
```

### Пример файла `users/user1.txt`:
```
api_token 20119095b4d3dbc9b164f6192f4c9494
auth-token q7vvuam6zrc8i5vagfbvfogt76ncwz
bits_sudo eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9...
experiment_overrides {%22experiments%22:{}%2C%22disabled%22:[]}
last_login 2025-09-28T20:30:38Z
login matrixqweqwe1123
name matrixqweqwe1123
persistent 1373358332%3A%3Avlzdkj2oewpuecsexs19bc224iv6ie
spare_key eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9...
```

### Как получить куки из браузера:
1. Откройте Twitch в браузере и авторизуйтесь
2. Откройте DevTools (F12)
3. Перейдите на вкладку Application → Cookies → https://www.twitch.tv
4. Скопируйте все куки в формат `name value`

**Важно:** Самая важная кука — `auth-token`. Остальные куки помогают избежать дополнительных проверок.

## Запуск

### Минимальный пример:
```powershell
python bot.py -url "https://www.twitch.tv/arsenlarsen7392"
```

### С дополнительными параметрами:
```powershell
python bot.py -url "https://www.twitch.tv/arsenlarsen7392" -headless -min-interval 30 -max-interval 90
```

### Все доступные параметры:
- `-url` или `--url` — **обязательный**, URL канала Twitch
- `-greetings` или `--greetings` — путь к файлу с приветствиями (по умолчанию `hi.txt`)
- `-phrases` или `--phrases` — путь к файлу с обычными фразами (по умолчанию `phrases.txt`)
- `-headless` или `--headless` — запуск браузеров в фоновом режиме (без интерфейса)
- `-users-dir` или `--users-dir` — папка с профилями пользователей (по умолчанию `users`)
- `-min-interval` или `--min-interval` — минимальный интервал между сообщениями в секундах (по умолчанию 20)
- `-max-interval` или `--max-interval` — максимальный интервал между сообщениями в секундах (по умолчанию 120)

### Примеры запуска:

**Стандартный запуск с видимыми браузерами:**
```powershell
python bot.py -url "https://www.twitch.tv/somechannel"
```

**Фоновый режим с быстрыми сообщениями:**
```powershell
python bot.py -url "https://www.twitch.tv/somechannel" -headless -min-interval 15 -max-interval 45
```

**С одинарным дефисом (тоже работает):**
```powershell
python bot.py -url "https://www.twitch.tv/somechannel"
```

## Как работает бот

1. **Запуск:** Бот читает все файлы `userN.txt` из папки `users/`
2. **Авторизация:** Для каждого профиля запускается отдельный браузер Chrome с загрузкой всех куков
3. **Первое сообщение:** Бот отправляет случайное **приветствие** из `hi.txt`
4. **Бесконечный цикл:** Затем бот отправляет случайные **фразы** из `phrases.txt`, ждет случайное время (20-120 сек) и повторяет
5. **Автосохранение:** Куки автоматически сохраняются **после каждого отправленного сообщения** и при остановке (Ctrl+C)

## Остановка ботов

Нажмите **Ctrl+C** в консоли. Все боты корректно завершат работу и сохранят обновленные куки.

## Примечания
- Боты работают **бесконечно** до ручной остановки (Ctrl+C)
- **Первое сообщение** — всегда приветствие из `hi.txt`
- **Последующие сообщения** — случайные фразы из `phrases.txt` для взаимодействия с чатом
- Каждый бот отправляет сообщения с **разными интервалами** (случайно от 20 до 120 секунд)
- Куки **автоматически сохраняются после каждого сообщения**, поэтому даже при аварийной остановке данные не потеряются
- При первом запуске возможны баннеры согласия/куки — скрипт пытается их закрыть автоматически
- Если селекторы чата у Twitch изменятся, может понадобиться обновить локаторы в `bot.py`
- Можно запускать сколько угодно ботов — просто добавьте больше файлов `userN.txt` в папку `users/`
